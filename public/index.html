<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/camanjs/4.1.2/caman.full.min.js"></script>
    <script src="combinatorics.js"></script>
    <script src="worker.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>

    <script>
    window.onload = function () {
        var fragmentSrc = [
            "uniform vec4 colorList;",
            "void main() {",
          //  "  float GrayScale =  (gl_FragCoord.r * 299.0 / 1000.0) + (gl_FragCoord.g * 587.0 / 1000.0) + (gl_FragCoord.b * 114.0 / 1000.0);",
          //  "  float sigmoidThreshold = 1.0 / (1.0 + pow(2.7182818284590452353602874713527, (-((GrayScale - 128.0) /32.0))));",
            "  gl_FragColor = colorList;",
            "}",
        ];



        var renderer = PIXI.autoDetectRenderer(4000, 3000);
        document.body.appendChild(renderer.view);

        // create the root of the scene graph
        var stage = new PIXI.Container();


        function CustomFilter(fragmentSource) {

            PIXI.Filter.call(this,
                // vertex shader
                null,
                // fragment shader
                fragmentSource
            );
        }

        CustomFilter.prototype = Object.create(PIXI.Filter.prototype);
        CustomFilter.prototype.constructor = CustomFilter;

        var bg = PIXI.Sprite.fromImage("bsampleImage.jpg");
        bg.scale.set(1, 1);
        stage.addChild(bg);


                var filter = new CustomFilter(fragmentSrc.join('\r\n'));
                filter.uniforms.colorList = [1.0,1.0,0.0,1.0]
                bg.filters = [filter];

        renderer.render(stage);



            animate();

        function animate() {

          //  filter.uniforms.customUniform += 0.04;

            renderer.render(stage);
            requestAnimationFrame(animate);
        }
        }
    </script>

    <title>Tritonize Demo</title>
</head>

<body>
</body>

</html>
