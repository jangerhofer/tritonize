<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><script src="https://cdnjs.cloudflare.com/ajax/libs/camanjs/4.1.2/caman.full.min.js"></script><script src="combinatorics.js"></script><script src="worker.js"></script><script src="FastBlur.js"></script><script src="StackBlur.js"></script><script src="download.js"></script><style>body{display:flex;align-items:center;justify-content:center;flex-direction:column}canvas{max-height:70vh;margin:25px}</style><script>function sigmoid(t){return 1/(1+Math.pow(Math.E,-(t-128)/32))}function calculateAspectRatioFit(t,e,a,i){var n=Math.min(a/t,i/e);return{width:t*n,height:e*n}}function tritonize(t,e){for(var a=0;a<t.length;a+=4){var i=299*t[a]/1e3+587*t[a+1]/1e3+114*t[a+2]/1e3,n=sigmoid(i),o=e[Math.floor(n*e.length)];t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2],t[3]=255}return t}function writeToCanvas(t,e){var a=document.getElementById(t);a.setAttribute("filtered","true");var i=a.getContext("2d"),n=i.createImageData(a.width,a.height);n.data.set(e),i.putImageData(n,0,0)}function createCanvas(t,e){var a=new Image;a.src="sampleImage.png",a.onload=function(){var i=document.createElement("canvas");i.id="canvas_"+e,i.style.order=2*e,i.onclick=function(t){t.toElement.getAttribute("filtered")?download(t.toElement.toDataURL(),"tritonizeEdit.png","image/png"):alert("That image hasn't been filtered yet.  Please wait.")},document.body.appendChild(i),i.width=a.width,i.height=a.height;var n=i.getContext("2d"),o=calculateAspectRatioFit(a.width,a.height,i.width,i.height);n.drawImage(a,0,0,o.width,o.height);var r=n.getImageData(0,0,i.width,i.height),h=r.data,g={image:{height:a.height,width:a.width},imageData:h,index:e,colorList:t};imageManipulator.run(g,function(t,e){writeToCanvas("canvas_"+e.index,t)})}}var imageManipulator=operative({BlurStack:BlurStack,mul_table:mul_table,shg_table:shg_table,blurImage:StackBlur.imageDataRGBA,sigmoid:sigmoid,tritonize:tritonize,run:function(t,e){e(this.tritonize(t.imageData,t.colorList),t)}});window.onload=function(){for(var t=[[198,12,48],[255,255,255],[0,0,0],[228,219,204],[60,74,198],[79,243,222]],e=Combinatorics.permutation(t).toArray(),a=0;a<e.length;a++)createCanvas(e[a],a)}</script><title>Tritonize Demo</title><link href="/tritonize/static/css/main.65027555.css" rel="stylesheet"></head><body><div id="root"></div><center><h3>The filter may take a short while to apply to all images. Once an image has been filtered, clicking on it will download a copy.</h3></center><script type="text/javascript" src="/tritonize/static/js/main.939b0afa.js"></script></body></html>